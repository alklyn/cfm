<!-- extend from base layout -->
{% extends "layout.html" %}

{% block styles %}
    {{ super() }}
    <link rel= "stylesheet" href="{{ url_for('static',filename='styles/ticket.css') }}">
{% endblock %}

{% block my_content%}
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4 col-md-offset-4 space">
                <ul class="nav nav-pills">
                    <li role="presentation" class="active"><a href="{{ url_for('index') }}/open">Open</a></li>
                    <li role="presentation"><a href="/{{ 'closed' }}">Closed</a></li>
                    <li role="presentation"><a href="/{{ 'al' }}">All</a></li>
                </ul>
            </div>
        </div>
    </div>

        <table class="table-element">
            <thead class="table-element">
                <tr class="table-element">
                    <th  class="table-element">
                        Ticket Number
                    </th>
                    <th  class="table-element">
                        Caller
                    </th>
                    {% if display_all %}
                    <th  class="table-element">
                        Phone Number
                    </th>
                    {% endif %}
                    <th  class="table-element">
                        Gender
                    </th>
                    <th  class="table-element">
                        Province
                    </th>
                    <th  class="table-element">
                        District
                    </th>
                    {% if display_all %}
                    <th  class="table-element">
                        Ward
                    </th>
                    <th  class="table-element">
                        Village
                    </th>
                    {% endif %}
                    <th  class="table-element">
                        Topic
                    </th>
                    <th  class="table-element">
                        Priority
                    </th>
                    <th  class="table-element">
                        CP
                    </th>
                    <th  class="table-element">
                        Programme
                    </th>
                    {% if display_all %}
                    <th  class="table-element">
                        Details
                    </th>
                    {% endif %}
                    <th  class="table-element">
                        Created By
                    </th>
                    <th  class="table-element">
                        Assigned To
                    </th>
                    <th  class="table-element">
                        Status
                    </th>
                    <th  class="table-element">
                        Date Created
                    </th>
                </tr>
            </thead>
            {% if tickets %}
            <tbody>
                {% for ticket in tickets %}
                <tr>
                    <td> <a href="{{url_for('update_ticket')}}/{{ ticket.ticket_number }}"> {{ ticket.ticket_number }} </a> </td>
                    <td> {{ ticket.name }} </td>
                    {% if display_all %}
                    <td> {{ ticket.phone_number }} </td>
                    {% endif %}
                    <td> {{ ticket.gender }} </td>
                    <td> {{ ticket.province }} </td>
                    <td> {{ ticket.district }} </td>
                    {% if display_all %}
                    <td> {{ ticket.ward_number }} </td>
                    <td> {{ ticket.location }} </td>
                    {% endif %}
                    <td> {{ ticket.topic }} </td>
                    <td> {{ ticket.priority }} </td>
                    <td> {{ ticket.partner }} </td>
                    <td> {{ ticket.programme }} </td>
                    {% if display_all %}
                    <td> {{ ticket.details }} </td>
                    {% endif %}
                    <td> {{ ticket.rep }} </td>
                    <td> {{ ticket.agent }} </td>
                    <td> {{ ticket.status }} </td>
                    <td class="table-element cfm-dt"> {{ ticket.dt_created.date() }} <br> {{ ticket.dt_created.time() }} </td>
                </tr>
                {% endfor %}
            </tbody>
            {% endif %}
        </table>
{% endblock %}
